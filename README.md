# Golang-Example-Project-Standard-Layout-

### Введение:
**Golang-Example-Project-Standard-Layout-** - веб-сервер, написанный на Golang, представляющий из себя небольшой набор функционала, используемого в веб-проектах.  
Для реализации веб интерфейсов используется, фреймворк https://echo.labstack.com/


### Архитектура проекта
При разработке архитектуры был использован следующий шаблон:  
https://github.com/golang-standards/project-layout


### Реализованный функционал:

#### API:

**[GET]**

*/api/v1/users/{id}* - получить пользователя по id  

**[POST]**

*/api/v1/users/create* - создать пользователя  
JSON 
```
{
  `display_name`:"test123"
}
```
-----

#### Фитчи:
- Для удобного получения необходимых сервисов, используется контейнер зависимостей https://github.com/sarulabs/di.
- Можно выбрать тип хранения данных между Database / Windows Registry и MongoDB.  
**etc/project.toml**
```
[data]
  storeType = "reg"
```
или 
```
[data]
  storeType = "db"
```
или

```
[data]
  storeType = "mongo"
```
- Реализована функция, работающая на заднем фоне, которая чистит таблицу или реестр от пользовотелей, хранящихся дольше, заданного периода.  
Запускается с заданной периодичностью. Для реализации использовался планировщик: https://github.com/zhashkevych/scheduler. По дефолту запускается раз в 24 часа и удаляет пользователей, старше минуты.  
**etc/project.toml**
```
[sync]
  deleteUsersTime = 24
[users]
  usersOverdueTimeInSeconds = 60
```
- Реализована middleware функция, которая проверяет наличие access_token, парсит его при наличии и сохраняет в структуру, чтобы при необходимости получить его.
- При запуске сервера, программа проверяет указанный в конфигурации порт (по дефолту 80) на занятость, если он занят, то ищет другой свободный.

#### Конфигурация проекта.
Для чтения конфигов проекта используется https://github.com/spf13/viper.  
Конфиги читаются из toml (etc/project.toml) файла и env, если конфигов нет, то указываются дефолтные, посмотреть которые можно в пакете **/internal/project/domain/configuration/**

#### Описание пакетов internal
##### interfaces  
В данном случае здесь описана реализация echo веб-сервера.
##### infrastructure
Здесь хранится реализация зависимостей (сервисов), необходимых для работы приложения.
##### domain
Здесь лежат структуры, константы и т.д.
##### core
Прокладка между пакетом вызывающим метод, какого либо сервиса и этим сервисом соответственно. 
